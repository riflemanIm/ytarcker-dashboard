<!-- русский -->

Этот документ на русском.
See the English version in [README.md](README.md).

# YTracker-Dashboard

... (вступление, функциональность и настройка окружения без изменений) ...

---

## Методы API

Все методы предоставляет прокси-сервер (порт 4000).  
Аутентификация: `token` (OAuth) передаётся либо в query (GET), либо в теле (POST/PATCH).

### **GET `/api/issues`**
Получает записи работы за период.  
**Параметры запроса**:  
- `token` (обязательный)  
- `startDate` (YYYY-MM-DD, обязательный)  
- `endDate` (YYYY-MM-DD, обязательный) → сервер добавляет `T23:59`  
- `userId` (опционально) — фильтр по автору (ID)  
- `login` (опционально) — фильтр по автору (логин)  

**Ответ**
```json
{
  "data": [ /* массив worklog */ ],
  "users": [
    { "id": "123", "name": "Иван Иванов" }
  ]
}
```

---

### **POST `/api/add_time`**
Создаёт новую запись учёта времени.  
**Параметры тела**: token, issueId, start (YYYY-MM-DDTHH:mm), duration (ISO 8601), comment (необяз.).  
**Ответ**: созданный worklog.

---

### **PATCH `/api/edit_time`**
Редактирует запись.  
**Параметры тела**: token, issueId, worklogId, duration, comment (необяз.).  
**Ответ**: обновлённый worklog.

---

### **POST `/api/delete_all`**
Удаляет несколько записей.  
**Параметры тела**: token, issueId, ids (массив ID).  
**Ответ**
```json
true
```

---

### **GET `/api/user_issues`**
Возвращает список задач, назначенных пользователю или созданных им, без дублей.  
**Параметры запроса**: token, userId или login.  

**Ответ**
```json
{
  "issues": [
    { "key": "PROJ-123", "summary": "Исправить баг авторизации" }
  ]
}
```

---

### **GET `/api/issue_type_list`**
Получает список типов задач для указанного entityKey.  
**Параметры запроса**: token, entityKey, email (все обязательные).  

> Для этого метода TLS-проверка отключена. Таймаут: 15 сек.

**Ответ**
```json
{
  "issue_type_list": [ /* ответ внешней системы */ ]
}
```

**Ошибки**
```json
{
  "error": "сообщение",
  "code": "ECONNABORTED",
  "upstreamStatus": 500,
  "upstreamData": { ... }
}
```

---

Не стесняйтесь дорабатывать проект, пулреквесты приветствуются.
